<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<section id="test"></section>
	<div id="begintimediv"></div>
	<div id="endtimediv"></div>
	<!-- <div id="value2"></div> -->
	<button class="start" id="sup">Start Up</button>
	<button class="start" id="sdown">Start Down</button>
	<button class="end" id="eup">End Up</button>
	<button class="end" id="edown">End Down</button>
	<button id="setwork">Set Work</button>
	<div id="confirmwork"></div>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="../js/vendor/moment.js"></script>
	<script src="../js/vendor/jquery.cookie.js"></script>
	<script>
		var beginwork = moment(moment().hour(9).minute(0)).format('H:mm');
		var endwork = moment(moment().hour(17).minute(0)).format('H:mm');
		var hours1,minutes1;
		var begintimediv = $('#begintimediv')
		var endtimediv = $('#endtimediv')
		$('#test').html('<input id="workinputstart">')
		$('#test').append('<input id="workinputend">')
		var workinputstart = $('#workinputstart');
		var workinputend = $('#workinputend');
		begintimediv.html('9:00 AM')
		endtimediv.html('5:00 PM')

		workinputstart.attr({
			type: 'range',
			min: 0,
			max: 1440,
			step: 15,
			value: 540,
			hidden: true
		});
		workinputend.attr({
			type: 'range',
			min: 0,
			max: 1440,
			step: 15,
			value: 1020,
			hidden: true
		});

		$('#sup').click({input: workinputstart, timediv: begintimediv}, inputUp)
		$('#sdown').click({input: workinputstart, timediv: begintimediv}, inputDown)
		$('#eup').click({input: workinputend, timediv: endtimediv}, inputUp)
		$('#edown').click({input: workinputend, timediv: endtimediv}, inputDown)
		$('#setwork').on('click', setCookie)

		function inputUp(e){
			b = $(this)
			v = parseInt(e.data.input.val());
			v = v + 15
			e.data.input.val(v)
        	format = formatTime(v)
			e.data.timediv.html(format)
			buttonPress(b)
		}
		function inputDown(e){
			b = $(this)
			v = parseInt(e.data.input.val());
			v = v - 15
			e.data.input.val(v)
        	format = formatTime(v)
			e.data.timediv.html(format)
			buttonPress(b)
		}

		function buttonPress (m) {
			if(m.hasClass('start')){
				valueh1 = Math.floor(v / 60);
        		valuem1 = v - (valueh1 * 60);
				beginwork = moment(moment().hour(valueh1).minute(valuem1)).format('H:mm');
			}else if(m.hasClass('end')){
				valueh1 = Math.floor(v / 60);
        		valuem1 = v - (valueh1 * 60);
				endwork = moment(moment().hour(valueh1).minute(valuem1)).format('H:mm');
			}
		}

		function setCookie() {
	        $.removeCookie('startwork', beginwork);
	        $.removeCookie('endwork', endwork);
	        $.cookie('startwork', beginwork);
	        $.cookie('endwork', endwork);
	        $('#confirmwork').text('Work has been set');
    	}

    	function formatTime(v){
    		var hours1 = Math.floor(v / 60);
            var minutes1 = v - (hours1 * 60);
            if(hours1.length == 1) hours1 = '0' + hours1;
            if(minutes1.length == 1) minutes1 = '0' + minutes1;
            if(minutes1 == 0) minutes1 = '00';
            if(hours1 >= 12){
                if (hours1 == 12){
                    hours1 = hours1;
                    minutes1 = minutes1 + " PM";
                }else{
                    hours1 = hours1 - 12;
                    minutes1 = minutes1 + " PM";
                }
            }else{

                hours1 = hours1;
                minutes1 = minutes1 + " AM";
            }
            if (hours1 == 0){
                hours1 = 12;
                minutes1 = minutes1;
            }
            return hours1+':'+minutes1;
    	}
	</script>
</body>
</html>